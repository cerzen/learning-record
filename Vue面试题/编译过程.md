Vue通过编译器将模板通过几个阶段最终编译为render函数，然后通过执行render函数生成Virtual DOM最终映射为真实DOM。

这个过程分为三个阶段:

1.将模板解析为AST（抽象语法树）

2.优化AST

3.将AST转换为render函数

在第一个阶段中，最主要的事情还是通过各种各样的正则表达式去匹配模板中的内容，然后将内容提取出来做各种逻辑操作，接下来会生成一个最基本的AST对象

```

{
  //类型
  type:1,
  //标签
  tag,
  //属性列表
  attrsList:attrs,
  //属性映射
  attrsMap: makeAttrsMap(attrs),
  //父节点
  parent,
  //子节点
  chidren:[]
}

```

然后根据这个最基本的AST对象中的属性，进一步扩展AST。

当然在这一阶段，还会进行其他的一些判断逻辑。比如说对比前后开闭标签是否一致，判断根组件是否只存在一个，判断是否符合HTML5Content Model规范等等问题。

接下来就是优化AST的阶段，在当前版本下，Vue进行的优化内容其实还不多。只是对节点进行了静态内容提取，也就是将永远不会变动的节点提取了出来，实现复用
Virtual DOM，跳过对比算法的功能。在下一个大版本中，Vue会在优化AST的阶段继续发力，实现更多的优化功能，尽可能的在编译阶段压榨更多的性能，比如说提取
静态的属性等等优化行为。

最后一个阶段就是通过AST生成render函数了。其实这一阶段虽然分支很多，但是最主要的目的是遍历整个AST，根据不同的条件生成不同的代码而已。
